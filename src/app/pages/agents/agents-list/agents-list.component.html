<nb-card>
  <nb-card-header>
    <div class="header-container">
      <h2>Agents</h2>
      <p>Découvrez les agents les plus influents du football mondial</p>
    </div>
  </nb-card-header>
  
  <nb-card-body>
    <div class="filters-container">
      <div class="search-container">
        <div class="input-with-icon">
          <nb-icon class="search-icon" icon="search-outline" pack="eva"></nb-icon>
          <input 
            nbInput 
            fullWidth 
            placeholder="Rechercher un agent ou un joueur..." 
            [(ngModel)]="searchQuery"
            (ngModelChange)="onSearchChange()">
        </div>
      </div>
      
      <div class="nationality-filter">
        <nb-select placeholder="Nationalité" [(selected)]="nationalityFilter" (selectedChange)="onNationalityChange()">
          <nb-option value="all">Toutes les nationalités</nb-option>
          <nb-option *ngFor="let nationality of nationalities | slice:1" [value]="nationality">
            {{ nationality }}
          </nb-option>
        </nb-select>
      </div>
    </div>
    
    <div *ngIf="isLoading" class="loading-container">
      <nb-spinner status="primary"></nb-spinner>
      <p>Chargement des agents...</p>
    </div>
    
    <div *ngIf="!isLoading && filteredAgents.length === 0" class="no-results">
      <nb-icon icon="alert-circle-outline" pack="eva"></nb-icon>
      <p>Aucun agent ne correspond à vos critères</p>
    </div>
    
    <div *ngIf="!isLoading && filteredAgents.length > 0" class="agents-grid">
      <div *ngFor="let agent of filteredAgents" class="agent-card">
        <div class="agent-header">
          <span class="nationality-badge">{{ agent.nationality }}</span>
          <span class="agency">{{ agent.agency }}</span>
        </div>
        
        <div class="agent-photo">
          <img [src]="agent.photo" [alt]="agent.name" onerror="this.src='assets/images/placeholder-agent.png'">
        </div>
        
        <div class="agent-info">
          <h4>{{ agent.name }}</h4>
          <div class="agent-details">
            <div class="detail-item">
              <nb-icon icon="person-outline" pack="eva"></nb-icon>
              <span>{{ agent.age }} ans</span>
            </div>
            <div class="detail-item">
              <nb-icon icon="people-outline" pack="eva"></nb-icon>
              <span>{{ agent.clients }} clients</span>
            </div>
            <div class="detail-item">
              <nb-icon icon="swap-outline" pack="eva"></nb-icon>
              <span>{{ agent.totalTransfers }} transferts</span>
            </div>
          </div>
          
          <div class="agent-value">
            <span class="label">Valeur des transferts:</span>
            <span class="value">{{ agent.transferValue }} M€</span>
          </div>
          
          <div class="clients-section">
            <h6>Clients principaux:</h6>
            <nb-list>
              <nb-list-item *ngFor="let client of agent.topClients">
                <nb-icon icon="star-outline" pack="eva" status="warning"></nb-icon>
                <span>{{ client }}</span>
              </nb-list-item>
            </nb-list>
          </div>
          
          <div class="specialization-section">
            <h6>Spécialisations:</h6>
            <div class="tags">
              <nb-tag *ngFor="let spec of agent.specialization" [text]="spec" status="info" appearance="outline"></nb-tag>
            </div>
          </div>
        </div>
        
        <div class="agent-footer">
          <button nbButton status="primary" size="small">Voir profil</button>
          <button nbButton status="info" size="small" ghost>Contacter</button>
        </div>
      </div>
    </div>
  </nb-card-body>
</nb-card>


